extends ../layout.pug

block content

  div.banner
    img(
      alt=""
      src="https://cdn2.hubspot.net/hub/6193707/hubfs/business-travel.jpg?width=550&name=business-travel.jpg")

  h2.text-center
    |Hello, #{name}!
    = ' '
    span.inline-block Your trip booking is confirmed

  p.text-center
    a(class='btn yellow' href= tripLink) View trip detail
  br

  if (flightOrders.length > 0)
    header
      h2 Flight Itinerary

    div
      each order in flightOrders
        if (order.pnr)
            span(style={color: '#707070'}) Pnr
            br
            span(style={color: '#f4b400', 'font-size': '20px', 'letter-spacing': '1px'})
              |#{order.pnr}
        h4 Departure Flights
        table(style={width: '100%'})
          each segment in order.flight.departureSegments
            tr
              td(style={width: '40%'})
                |#{airports[segment.departure].airport_name}
                = ' '
                |(#{segment.departure})
                br
                |#{segment.departureTime}
              td(style={width: '20%', 'text-align': 'center'})
                <span style='font-size:25px;'>&#8594;</span>
              td(style={width: '40%'})
                |#{airports[segment.arrival].airport_name}
                = ' '
                |(#{segment.arrival})
                br
                |#{segment.arrivalTime}

        if (order.flight.returnSegments.length > 0)
          h4 Return Flights
          table(style={width: '100%'})
            each segment in order.flight.returnSegments
              tr
                td(style={width: '40%'})
                  |#{segment.departure}
                  br
                  |#{segment.departureTime}
                td(style={width: '20%', 'text-align': 'center'})
                  <span style='font-size:25px;'>&#8594;</span>
                td(style={width: '40%'})
                  |#{segment.arrival}
                  br
                  |#{segment.arrivalTime}

        h4 Passengers
        ul
          each passenger in order.passengers
            li
              span.text-capitalize
                #{passenger.title}.
              = ' ' 
              |#{passenger.lastName} #{passenger.firstName} (#{passenger.businessEmail})

        h4 Contact
        table
          tr
            td Email:
            td #{order.contactInfo.email}
          tr
            td Phone:
            td #{order.contactInfo.phone}
          tr
            td Name:
            td #{order.contactInfo.lastName} #{order.contactInfo.name}

        h4
          |Total price:
          = ' '
          span(style={color:'#f4b400'}) #{order.totalPrice} #{order.currency}

        h4
          |Payment: 
          if (order.payment.brand)
            | #{order.payment.brand} **** **** **** #{order.payment.last4}
        hr
  br

  if (hotelOrders.length > 0)
    header
      h2 Lodging

    div
      each order in hotelOrders
        h3 #{order.hotel.name}
        span(style={color: '#707070'}) Confirmation code
            br
            span(style={color: '#f4b400', 'font-size': '20px', 'letter-spacing': '1px'})
              |#{order.customerCode}
        ul
          li Address: #{order.hotel.address}
          li City: #{order.hotel.cityName}, #{order.hotel.country}
          li Room: #{order.hotel.roomName}
          li Number of rooms: #{order.hotel.numberOfRoom}
          li Included: #{order.hotel.boardName}
          if (order.hotel.phones)
            li Phones: 
              each phone in order.hotel.phones
                <span>#{phone.phoneNumber}, <span>
          li Check-in date: #{order.hotel.checkInDate}
          li Check-out date: #{order.hotel.checkOutDate}

        h4 Passengers
        ul
          each passenger in order.passengers
            li
              span.text-capitalize
                #{passenger.title}.
              = ' ' 
              | #{passenger.firstName} #{passenger.lastName} (#{passenger.businessEmail})

        if (order.childrenInfo.length > 0)
          h3 Children Details
          ul
            each child in order.childrenInfo
              li #{child.firstName} #{child.lastName}. Age: #{child.age}

        h4 Contact
        table
          tr
            td Email:
            td #{order.contactInfo.email}
          tr
            td Phone:
            td #{order.contactInfo.phone}
          tr
            td Name:
            td #{order.contactInfo.lastName} #{order.contactInfo.name}

        h4
          |Total price:
          = ' '
          span(style={color:'#f4b400'}) #{order.totalPrice} #{order.currency}

        h4 
          |Payment: 
          if (order.payment.brand)
            |#{order.payment.brand} **** **** **** #{order.payment.last4}
        hr

    p.text-center
      a(class='btn' href= hotelLink) View hotel details
